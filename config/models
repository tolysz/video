User
    uuid          Text
    name          Text Maybe
    friendly      Text Maybe
    avatar        Text Maybe
--    photo         Photo Maybe
    UniqueUser    uuid
    deriving Show Typeable Generic

Email
    email         Text
    user          UserId
    UniqueEmail   email
    deriving Show Typeable Generic

SiteAdmin
    user            UserId
    isAdmin         Bool
    UniqueSiteAdmin user
    deriving Show Typeable Generic

OAuthAccess
    owner         UserId
    group         SiteGroupId
    realm         Text
    identity      Text Maybe
    accessToken   Text Maybe
    expires       UTCTime Maybe
    refreshToken  Text Maybe
    tokenType     Text Maybe
    scope         Texts
    -- OnePerRealm   owner group
    UniqueOAuthAccess owner group
    deriving Show Typeable Generic


-- Let start the other end
SiteGroupMember
  group         SiteGroupId
  user          UserId
  fullMember    Bool
  userAdmin     Bool
  videoAdmin    Bool
  UniqueSiteGroupMember group user
  deriving Show Typeable Generic

GroupFriend
  group         SiteGroupId
  userMaster    UserId
  userSlave     UserId
  oauth         Bool

SiteGroup
  uuid            Text
  public          Bool
  name            Text
  short           ShortName
  notes           Text Maybe
  url             Text Maybe
  UniqueSiteGroup uuid
  deriving Show Typeable Generic

-- todo: revisit

VirtualVideo
  raw     YTVideoId
  users   [UserId]
  votes   [Int]
  note    Text
  start   Int
  end     Int
  UniqueVirtualVideo raw start
  deriving Show Typeable Generic

Event
  title   Text
  time    UTCTime
  group   SiteGroupId

PlaylistEven
  type     PlaylistType
  event    EventId
  playlist YTVideoPlaylistId

YTChannel json
    status        ViewChan
    ref           Text
    etag          Text
    UniqueYTPChannel ref
    deriving Show Typeable Generic

YTPlaylist
    ref           Text
    etag          Text
    snippet       (TC YoutubePlaylist) Maybe
    googleUser    Text
    UniqueYTPlaylist ref
    deriving Show Typeable Generic

YTVideoPlaylist
     playlist     YTPlaylistId
     video        YTVideoId
     UniqueYTVideoPlaylist playlist video
     deriving Show Typeable Generic

YTVideo json
    ref           Text
    etag          Text
    snippet       (TC YoutubeVideo) Maybe
    googleUser    Text
    UniqueYTVideo ref
    deriving Show Typeable Generic

YTVideoUser
    video         YTVideoId
    user          UserId
    created       UTCTime default=now()
    eventPerm     EventParticipants default='EventParticipantsRegardless'
    viewPerms     ViewPerm          default='VPChanMembers'
    UniqueYTVideoUser video user
    deriving Show Typeable Generic

ChannelMember
    owner         Bool
    ref           YTChannelId
    user          UserId
    UniqueChannelMember ref user
    deriving Show Typeable Generic
